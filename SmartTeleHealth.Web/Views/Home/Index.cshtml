@model SmartTeleHealth.Web.Models.Home.HomeTablesViewModel
@{ ViewBag.Title = "Home Page"; }

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        type="text/javascript"></script>

<script type="text/javascript">

    $(document).ready(function () {
        setInterval(function () {
            UpdateNotifications();
        }, 3000);
    });

    function UpdateNotifications() {
        $.ajax({
            type: "GET",
            url: "/AppointmentsCalendar/GetNotifications",
            data: '{}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {
                console.log(response);
                if (response != null) {

                    var j = ""; var p = 0; var Q = "";
                    $.each(response, function (k, v) {
                        p++;
                        if (p < 6) {
                            j += "<li><a><img src='../Content/Images/nty.png' style='height:20px;width:20px'/> <strong>  " + v.Notification.toString() + " </strong> <br /> <div style='text-align:right;font-size:smaller;font-style:italic'> <i style='font-size:smaller'> updated : " + v.LastUpdated.toString() + "</i></div></a></li>";
                        }
                        Q += "<a><img src='../Content/Images/nty.png' style='height:20px;width:20px'/> <strong>  " + v.Notification.toString() + " </strong> <br /> <div style='text-align:right;font-size:smaller;font-style:italic'> <i style='font-size:smaller'> updated : " + v.LastUpdated.toString() + "</i></div></a>";
                    });
                    $('#myNotifyList').html("");
                    j += "<li><a data-toggle='modal' data-target='#myModal'><div style='text-align:center'><strong> Show more </strong></div></li>";
                    $('#myNotifyList').append(j);
                    $('#countNotify').html("<span>" + p + "</span>");
                    $('#myAllNotifications').html("");
                    $('#myAllNotifications').append(Q);
                }
            },
            failure: function (response) {
                alert(response.d);
            }
        });
    }
</script>

<!-- Notification Modal -->
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    &times;
                </button>
                <h4 class="modal-title">
                    <img src="~/Content/Images/nty.png" style="height: 50px; width: 50px">
                    Notifications
                </h4>
            </div>
            <div class="modal-body" id="myAllNotifications">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>


<div class="row top-home-banner">

    <ul>
        <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown"> Notifiction (<span id="countNotify">0</span>) <span class="caret"></span></a>
            <ul class="dropdown-menu" id="myNotifyList">
            </ul>
        </li>

    </ul>

    <div class="container padding-top-40">
        <div class="row">
            <div class="col-xs-12 text-left padding-top-0 padding-left-0 padding-bottom-20">
                <strong class="text-white font-48 margin-top-10 font-lato font-weight-700" style="color: #ffffff;">
                    Find the best doctors
                </strong>
                <p class="text-white font-17 padding-top-15" style="color: #ffffff;">
                    Get personalized doctor advice &nbsp;|&nbsp; Doctor booking &nbsp;|&nbsp; Find the right doctors
                </p>
            </div>
        </div>
    </div>
    <div id="homeSearch" class="search-stacks hidden-xs">
        <ul class="nav nav-tabs container" role="tablist">
            <li role="presentation" class="active">
                <a href="#doctors_tab" aria-controls="doctors_tab" role="tab" data-toggle="tab">Find and Book</a>
            </li>
        </ul>
        <div class="tab-content">
            <div role="tabpanel" class="tab-pane container active" id="doctors_tab">
                <div class="col-xs-12 padding-top-30 padding-bottom-15">
                    @using (Html.BeginForm("SearchBest", "Home", FormMethod.Get))
                    {
        <div class="col-md-4 col-sm-4 padding-0">
            <div class="form-group text-left">
                <span class="fa fa-user-md"></span>
                <input class="form-control" type="text" name="name" placeholder="Search By Name" maxlength="70" autocomplete="off">
            </div>
        </div>
                        <div class="col-md-3 col-sm-3 padding-0">
                            <div class="form-group">
                                <select class="form-control sm-field" name="speciality">
                                    <!--  2 -->
                                    <option>Select speciality</option>
                                    @foreach (var d in Model.Specialities)
                                    {
                    <option value=@d.Value> @d.Text  </option>}

                                </select>
                            </div>
                        </div>
                                        <div class="col-md-3 col-sm-3 padding-0">

                                            <div class="form-group">
                                                <!--  3 -->
                                                <input class="form-control" type="text" name="search" placeholder="Enter City or ZipCode" maxlength="50" autocomplete="off">
                                            </div>
                                        </div>
                                                        <div class="col-md-2 col-sm-2 text-left">
                                                            <div class="form-group">
                                                                <input type="submit" value="Search" class="form-control btn btn-success">
                                                            </div>
                                                        </div>}
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row home-feature">
    <div class="col-md-6">
        <h3 class="text-center">@Html.DisplayNameFor(model => model.MostCommented)</h3>
        @Html.Partial("_ListDoctorsPartial", Model.MostCommented)
    </div>
    <div class="col-md-6">
        <h3 class="text-center">@Html.DisplayNameFor(model => model.HighestRating)</h3>
        @Html.Partial("_ListDoctorsPartial", Model.HighestRating)
    </div>
</div>
<div class="row">
    <div style="text-align:center">
        <h2>Are You A Doctor?</h2>
        <br />
    </div>
</div>
<div class="home-features-wrapper row">
    <div class="col-md-4">
        <div class="home-feature">
            <div>
                <img class="" src="~/Content/Images/3.png" />
            </div>
            <div>
                <h3>Create an Account</h3>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="home-feature">
            <div>
                <img class="" src="~/Content/Images/7.png" />
            </div>
            <div>
                <h3>List your practices</h3>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="home-feature">
            <div>
                <img class="" src="~/Content/Images/15.png" />
            </div>
            <div>
                <h3>Get Patients</h3>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div style="text-align:center">
        <h2>Are You A Patient?</h2>
        <br />
    </div>
</div>
<div class="home-features-wrapper row">
    <div class="col-md-4">
        <div class="home-feature">
            <div>
                <img class="" src="~/Content/Images/1.png" />
            </div>
            <div>
                <h3>Find Doctors</h3>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="home-feature">
            <div>
                @*                <img class="img-responsive" src="~/Content/Images/9.png" />*@

                <img class="" src="~/Content/Images/9.png" />
            </div>
            <div>
                <h3>Doctors Review</h3>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="home-feature">
            <div>
                <img class="" src="~/Content/Images/11.png" />
            </div>
            <div>
                <h3>Book an Appointment</h3>
            </div>
        </div>
    </div>
</div>